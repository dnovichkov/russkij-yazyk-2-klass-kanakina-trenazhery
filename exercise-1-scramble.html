<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–£—Ä–æ–≤–µ–Ω—å 1 ‚Äî —Å–æ–±—Ä–∞—Ç—å –∏–∑ –±—É–∫–≤</title>
<style>
  :root{--bg:#fff;--card:#fff;--accent:#0f62fe;--muted:#6b7280}
  body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;background:#f3f4f6;margin:0;color:#0b1220}
  header{padding:18px;text-align:center;background:white;box-shadow:0 1px 0 rgba(0,0,0,0.04)}
  main{max-width:920px;margin:18px auto;padding:16px}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  button, .btn{background:var(--accent);color:white;border:none;padding:10px;border-radius:10px;cursor:pointer}
  .btn.alt{background:#6b7280}
  .card{background:white;padding:16px;border-radius:12px;box-shadow:0 6px 20px rgba(2,6,23,0.04);margin-bottom:12px}
  .scramble{display:flex;gap:8px;flex-wrap:wrap;margin-top:14px}
  .tile{min-width:44px;min-height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#f8fafc;border:1px solid #e6eef8;font-size:20px;cursor:pointer;user-select:none}
  .slots{display:flex;gap:6px;flex-wrap:wrap;margin-top:12px}
  .slot{min-width:44px;min-height:44px;border-radius:8px;background:#fff;border:2px dashed #e6eef8;display:flex;align-items:center;justify-content:center;font-size:20px}
  .slot.space{background:transparent;border:0;min-width:30px}
  .status{margin-top:12px;color:var(--muted)}
  .hint{background:#f9fafb;color:#374151;border-radius:8px;padding:6px}
</style>
</head>
<body>
<header>
  <h1>–£—Ä–æ–≤–µ–Ω—å 1 ‚Äî —Å–æ–±—Ä–∞—Ç—å —Å–ª–æ–≤–æ –∏–∑ –±—É–∫–≤</h1>
  <div style="color:var(--muted)">–ö–ª–∏–∫–Ω–∏—Ç–µ ‚ñ∂ —á—Ç–æ–±—ã —É—Å–ª—ã—à–∞—Ç—å —Å–ª–æ–≤–æ. –ö–ª–∏–∫ –ø–æ –±—É–∫–≤–µ ‚Äî –æ–Ω–∞ –ø–µ—Ä–µ–π–¥—ë—Ç –≤ —Å–ª–µ–¥—É—é—â–µ–µ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ. –ö–ª–∏–∫ –ø–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ–º—É —Å–ª–æ—Ç—É ‚Äî –±—É–∫–≤—É –≤–µ—Ä–Ω—É—Ç—å.</div>
</header>

<main>
  <div class="card">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:8px">
      <div class="controls">
        <button id="playBtn">‚ñ∂ –î–∏–∫—Ç–æ–≤–∫–∞</button>
        <button id="replayBtn" class="btn alt">‚ü≥ –ü–æ–≤—Ç–æ—Ä</button>
        <button id="hintBtn" class="btn alt">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ (–ø–µ—Ä–≤–∞—è –±—É–∫–≤–∞)</button>
        <button id="shuffleBtn" class="btn alt">üîÄ –ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
      </div>
      <div>
        <button id="checkBtn">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
        <button id="nextBtn" class="btn alt">–°–ª–µ–¥—É—é—â–µ–µ</button>
      </div>
    </div>

    <div style="margin-top:12px" class="status">
      <strong>–ü—Ä–æ–≥—Ä–µ—Å—Å:</strong> <span id="progress">0 / 0</span>
    </div>

    <div style="margin-top:16px">
      <div class="card">
        <div><strong>–ë—É–∫–≤—ã:</strong></div>
        <div id="bank" class="scramble" aria-live="polite"></div>
        <div style="margin-top:8px"><small class="hint">–ö–ª–∏–∫ –ø–æ –±—É–∫–≤–µ –¥–æ–±–∞–≤–ª—è–µ—Ç –µ—ë –≤ —Å–ª–µ–¥—É—é—â–µ–µ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ. –ß—Ç–æ–±—ã —É–±—Ä–∞—Ç—å ‚Äî –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —É–∂–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –±—É–∫–≤–µ.</small></div>
      </div>

      <div class="card">
        <div><strong>–°–æ–±–µ—Ä–∏—Ç–µ —Å–ª–æ–≤–æ:</strong></div>
        <div id="slots" class="slots" aria-live="polite"></div>
      </div>

      <div id="feedback" style="margin-top:8px;font-weight:600;"></div>
    </div>
  </div>

  <div class="card">
    <h3>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
    <ol>
      <li>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–µ—Ä—ë—Ç —Å–ª—É—á–∞–π–Ω–æ–µ —Å–ª–æ–≤–æ –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–æ–≤ (–Ω–∏–∂–µ)</li>
      <li>–ë—É–∫–≤—ã –ø–µ—Ä–µ–º–µ—à–∏–≤–∞—é—Ç—Å—è –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ –ø–ª–∏—Ç–æ–∫</li>
      <li>–£—á–µ–Ω–∏–∫ –∫–ª–∏–∫–∞–µ—Ç –ø–æ –ø–ª–∏—Ç–∫–∞–º ‚Äî –±—É–∫–≤—ã –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ —Å–ª–æ—Ç—ã</li>
      <li>–ü—Ä–æ–≤–µ—Ä–∫–∞ ‚Äî –Ω–∞–∂–∞—Ç—å ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å¬ª. –ü–æ–¥—Å–∫–∞–∑–∫–∏ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç –ø–µ—Ä–≤—É—é –±—É–∫–≤—É.</li>
    </ol>
  </div>
</main>

<script>
/* --- –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–º–µ–Ω–Ω–æ –≤–∞—à —Å–ø–∏—Å–æ–∫ (–æ—á–∏—â–µ–Ω –æ—Ç —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–∫–æ–±–æ–∫) --- */
const WORDS = [
"–∞–ª—Ñ–∞–≤–∏—Ç","–∞–ø—Ä–µ–ª—å","–±–µ—Ä—ë–∑–∞","–±—ã—Å—Ç—Ä–æ","–≤–¥—Ä—É–≥","–≤–µ—Å–µ–ª–æ","–≤–µ—Ç–µ—Ä","–≤–æ—Ä–æ–±–µ–π","–≤–æ—Ä–æ–Ω–∞",
"–≥–æ—Ä–æ–¥","–¥–µ–≤–æ—á–∫–∞","–¥–µ–∂—É—Ä–Ω—ã–π","–¥–µ–∫–∞–±—Ä—å","–¥–µ—Ä–µ–≤–Ω—è","–¥–æ—Ä–æ–≥–∞","–¥–æ —Å–≤–∏–¥–∞–Ω–∏—è",
"–∑–∞–≤–æ–¥","–∑–∞—è—Ü","–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ","–∑–µ–º–ª—è–Ω–∏–∫–∞","–∏–∑–≤–∏–Ω–∏—Ç–µ","–∏–Ω–µ–π","–∫–∞–ø—É—Å—Ç–∞","–∫–∞—Ä–∞–Ω–¥–∞—à",
"–∫–∞—Ä—Ç–∏–Ω–∞","–∫–ª–∞—Å—Å","–∫–æ–Ω—å–∫–∏","–∫–æ—Ä–æ–≤–∞","–ª–æ–ø–∞—Ç–∞","–ª—è–≥—É—à–∫–∞","–º–∞–≥–∞–∑–∏–Ω","–º–∞–ª–∏–Ω–∞","–º–∞—à–∏–Ω–∞",
"–º–µ–±–µ–ª—å","–º–µ–¥–≤–µ–¥—å","–º–µ—Å—è—Ü","–º–µ—Ç–µ–ª—å","–º–µ—Ç—Ä–æ","–º–æ–ª–æ–∫–æ","–º–æ–ª–æ—Ç–æ–∫","–º–æ—Ä–∫–æ–≤—å","–º–æ—Ä–æ–∑","–º–æ—Å–∫–≤–∞",
"–Ω–∞—Ä–æ–¥","–Ω–æ—è–±—Ä—å","–æ–±–µ–¥","–æ–±–µ–∑—å—è–Ω–∞","–æ–±–ª–∞–∫–æ","–æ–¥–µ–∂–¥–∞","–æ–∫—Ç—è–±—Ä—å","–æ—Å–∏–Ω–∞","–æ—Ç–µ—Ü",
"–ø–∞–ª—å—Ç–æ","–ø–µ–Ω–∞–ª","–ø–µ—Ç—É—Ö","–ø–ª–∞—Ç—å–µ","–ø–æ—Å—É–¥–∞","–ø—Ä–æ—â–∞–π","—Ä–∞–±–æ—Ç–∞","—Ä–∞–±–æ—á–∏–π","—Ä–µ–±—è—Ç–∞","—Ä–∏—Å—É–Ω–æ–∫",
"—Ä–æ–¥–∏–Ω–∞","—Ä–æ—Å—Å–∏—è","—Ä—É—Å—Å–∫–∏–π","—Å–∞–ø–æ–≥–∏","—Å–∞—Ö–∞—Ä","—Å–µ–Ω—Ç—è–±—Ä—å","—Å–∫–æ—Ä–æ","—Å–Ω–µ–≥–∏—Ä—å","—Å–æ–±–∞–∫–∞","—Å–æ—Ä–æ–∫–∞",
"—Å–ø–∞—Å–∏–±–æ","—Å—Ç–∞–∫–∞–Ω","—Å—É–±–±–æ—Ç–∞","—Ç–∞—Ä–µ–ª–∫–∞","—Ç–µ—Ç—Ä–∞–¥—å","—Ç–æ–≤–∞—Ä–∏—â","—Ç–æ–ø–æ—Ä","—É–ª–∏—Ü–∞","—É—Ä–æ–∂–∞–π",
"—É—á–µ–Ω–∏–∫","—É—á–µ–Ω–∏—Ü–∞","—É—á–∏—Ç–µ–ª—å","—É—á–∏—Ç–µ–ª—å–Ω–∏—Ü–∞","—Ñ–∞–º–∏–ª–∏—è","—Ñ–µ–≤—Ä–∞–ª—å","—Ö–æ—Ä–æ—à–æ","—â–∞–≤–µ–ª—å",
"—è–±–ª–æ–∫–æ","—è–±–ª–æ–Ω—è","—è–≥–æ–¥–∞","—è–∑—ã–∫","—è–Ω–≤–∞—Ä—å"
];

/* --- –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ --- */
let pool = [];        // —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É –∏–¥—ë—Ç –ø—Ä–æ—Ö–æ–¥
let idx = 0;
let current = "";
let slotsState = [];  // —Ç–µ–∫—É—â–µ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π
const progressEl = document.getElementById('progress');
const bankEl = document.getElementById('bank');
const slotsEl = document.getElementById('slots');
const feedback = document.getElementById('feedback');

function initPool() {
  pool = [...WORDS]; // –∫–æ–ø–∏—è
  // –º–æ–∂–Ω–æ –ø–µ—Ä–µ–º–µ—à–∞—Ç—å –ø–æ—Ä—è–¥–æ–∫
  pool.sort(()=>Math.random()-0.5);
  idx = 0;
  updateProgress();
}
function updateProgress(){ progressEl.textContent = `${idx} / ${pool.length}` }

function normalizeForSlots(word) {
  // –±—É–¥–µ–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–±–µ–ª—ã –∫–∞–∫ ' ' ‚Äî –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–ª–æ—Ç—ã-–∂–µ
  return word;
}

function prepareWord(w) {
  current = w;
  // —Ñ–æ—Ä–º–∏—Ä—É–µ–º –±—É–∫–≤—ã - —É—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ–±–µ–ª—ã –æ—Ç–¥–µ–ª—å–Ω–æ
  const letters = Array.from(w);
  // tiles contain only non-space letters
  const tiles = letters.filter(ch => ch !== ' ');
  // shuffle tiles
  for (let i = tiles.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random()*(i+1));
    [tiles[i], tiles[j]] = [tiles[j], tiles[i]];
  }
  renderBank(tiles);
  renderSlots(letters);
  feedback.textContent = '';
}

function renderBank(tiles) {
  bankEl.innerHTML = '';
  tiles.forEach((ch, i) => {
    const btn = document.createElement('div');
    btn.className = 'tile';
    btn.textContent = ch;
    btn.dataset.letter = ch;
    btn.dataset.index = i;
    btn.addEventListener('click', onBankClick);
    bankEl.appendChild(btn);
  });
}

function renderSlots(letters) {
  slotsState = letters.map(ch => (ch === ' ' ? ' ' : '')); // '' empty, ' ' for space
  slotsEl.innerHTML = '';
  letters.forEach((ch, i) => {
    const s = document.createElement('div');
    s.className = 'slot' + (ch===' ' ? ' space' : '');
    s.dataset.pos = i;
    s.textContent = ch===' ' ? ' ' : '';
    s.addEventListener('click', onSlotClick);
    slotsEl.appendChild(s);
  });
}

/* --- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ --- */
function onBankClick(e){
  const letter = e.currentTarget.dataset.letter;
  // –Ω–∞–π—Ç–∏ –ø–µ—Ä–≤—ã–π –ø—É—Å—Ç–æ–π —Å–ª–æ—Ç (–Ω–µ —Å—á–∏—Ç–∞–µ–º –ø—Ä–æ–±–µ–ª—ã)
  const pos = slotsState.findIndex(v => v === '');
  if (pos === -1) return;
  // –≤—Å—Ç–∞–≤–∏—Ç—å
  slotsState[pos] = letter;
  updateSlotsUI();
  // —É–¥–∞–ª–∏—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–ª–∏—Ç–∫—É –≤ –±–∞–Ω–∫–µ ‚Äî –æ—Ç–º–µ—á–∞–µ–º data-used
  e.currentTarget.style.visibility = 'hidden';
}

function onSlotClick(e){
  const pos = Number(e.currentTarget.dataset.pos);
  const val = slotsState[pos];
  if (!val || val === ' ') return; // –µ—Å–ª–∏ –ø—É—Å—Ç–æ –∏–ª–∏ –ø—Ä–æ–±–µ–ª ‚Äî –Ω–∏—á–µ–≥–æ
  // –≤–µ—Ä–Ω—É—Ç—å –±—É–∫–≤—É –≤ –±–∞–Ω–∫ (–ø–µ—Ä–≤—É—é —Å–∫—Ä—ã—Ç—É—é –ø–ª–∏—Ç–∫—É —Å —ç—Ç–æ–π –±—É–∫–≤–æ–π)
  const tiles = Array.from(bankEl.children);
  const found = tiles.find(t => t.dataset.letter === val && t.style.visibility !== 'visible' ? false : true /* keep */);
  // better: find tile that is visible and not used‚Äîwe hid used ones; we need to show first hidden tile with letter
  const hiddenTile = tiles.find(t => t.dataset.letter === val && t.style.visibility === 'hidden');
  if (hiddenTile) hiddenTile.style.visibility = 'visible';
  slotsState[pos] = '';
  updateSlotsUI();
}

function updateSlotsUI(){
  Array.from(slotsEl.children).forEach((el, i) => {
    el.textContent = slotsState[i] === ' ' ? ' ' : (slotsState[i] || '');
  });
}

function getAssembled(){
  return slotsState.join('');
}

/* --- –ü—Ä–æ–≤–µ—Ä–∫–∞ --- */
function checkAnswer(){
  const assembled = getAssembled();
  const target = current;
  // —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º –±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞
  if (assembled.toLowerCase() === target.toLowerCase()){
    feedback.style.color = 'green';
    feedback.textContent = '–ü—Ä–∞–≤–∏–ª—å–Ω–æ! üéâ';
    // —É–≤–µ–ª–∏—á–∏—Ç—å —Å—á—ë—Ç—á–∏–∫
    idx++;
    setTimeout(()=> {
      saveProgress();
    }, 200);
  } else {
    feedback.style.color = 'crimson';
    feedback.textContent = '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ –ø–æ–¥—Å–∫–∞–∑–∫—É.';
  }
  updateProgress();
}

function nextWord(){
  if (idx >= pool.length) {
    // –∑–∞–≤–µ—Ä—à–∏–ª–∏
    alert('–í—ã –ø—Ä–æ—à–ª–∏ –≤—Å–µ —Å–ª–æ–≤–∞! –ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ.');
    initPool();
    pickNext();
    return;
  }
  pickNext();
  updateProgress();
}

/* --- –ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ –¥–∏–∫—Ç–æ–≤–∫–∞ --- */
function revealFirst(){
  // –Ω–∞–π–¥–µ–º –ø–µ—Ä–≤—É—é –±—É–∫–≤—É, —Å—Ç–æ—è—â—É—é –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Å–ª–æ–≤–µ (–ø—Ä–æ–ø—É—Å–∫–∞—è –ø—Ä–æ–±–µ–ª—ã)
  const letters = Array.from(current);
  const firstLetter = letters.find(ch => ch !== ' ');
  if (!firstLetter) return;
  // –ø–æ—Å—Ç–∞–≤–∏—Ç—å –µ—ë –≤ –ø–µ—Ä–≤—ã–π –ø—É—Å—Ç–æ–π —Å–ª–æ—Ç, –∏ —Å–∫—Ä—ã—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –ø–ª–∏—Ç–∫—É –≤ –±–∞–Ω–∫–µ
  const pos = slotsState.findIndex(v => v === '');
  if (pos === -1) return;
  // –Ω–∞–π–¥–µ–º –ø–ª–∏—Ç–∫—É —Å —ç—Ç–æ–π –±—É–∫–≤–æ–π, –ø–æ–∫–∞–∂–µ–º —Å–∫—Ä—ã—Ç—É—é
  const tile = Array.from(bankEl.children).find(t => t.dataset.letter === firstLetter && t.style.visibility !== 'hidden');
  // If tile visible used? We'll search hidden one to hide it
  const hiddenTile = Array.from(bankEl.children).find(t => t.dataset.letter === firstLetter && t.style.visibility !== 'visible');
  // Find visible and hide it.
  const visibleTile = Array.from(bankEl.children).find(t => t.dataset.letter === firstLetter && t.style.visibility !== 'hidden');
  if (visibleTile) visibleTile.style.visibility = 'hidden';
  slotsState[pos] = firstLetter;
  updateSlotsUI();
}

/* --- TTS (Web Speech) --- */
let voices = [];
function loadVoices(){
  voices = speechSynthesis.getVoices() || [];
  // –∏–Ω–æ–≥–¥–∞ –≥–æ–ª–æ—Å–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø–æ–∑–∂–µ ‚Äî –Ω–∞ —Å–æ–±—ã—Ç–∏–∏ onvoiceschanged
}
speechSynthesis.onvoiceschanged = loadVoices;
loadVoices();

function chooseRussianVoice(){
  if (!voices || voices.length===0) loadVoices();
  // –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–≤—ã–π —Å lang –Ω–∞—á–∏–Ω–∞—é—â–∏–º—Å—è –Ω–∞ 'ru'
  let v = voices.find(x => x.lang && x.lang.toLowerCase().startsWith('ru'));
  if (!v) v = voices.find(x => /russian/i.test(x.name));
  return v || null;
}

function speakText(text, rate=0.95){
  if (!('speechSynthesis' in window)) {
    alert('TTS (speechSynthesis) –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ.');
    return;
  }
  const utter = new SpeechSynthesisUtterance(text);
  const v = chooseRussianVoice();
  if (v) utter.voice = v;
  utter.rate = rate;
  speechSynthesis.cancel();
  speechSynthesis.speak(utter);
}

/* --- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–ª–æ–≤–∞–º --- */
function pickNext(){
  // –≤—ã–±–∏—Ä–∞–µ–º —Ç–µ–∫—É—â–µ–µ —Å–ª–æ–≤–æ ‚Äî —Å–ª–µ–¥—É—é—â–∏–π –≤ pool, –Ω–æ –µ—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–ª–∏ –∫–æ–Ω—Ü–∞ ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
  if (pool.length === 0) initPool();
  if (idx >= pool.length) idx = 0; // –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
  const w = pool[idx];
  prepareWord(w);
  updateProgress();
}

document.getElementById('playBtn').addEventListener('click', ()=> speakText(current));
document.getElementById('replayBtn').addEventListener('click', ()=> speakText(current));
document.getElementById('hintBtn').addEventListener('click', revealFirst);
document.getElementById('shuffleBtn').addEventListener('click', ()=> { // –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–º–µ—à–∞—Ç—å –ø–ª–∏—Ç–∫–∏
  const tiles = Array.from(bankEl.children).map(t => t.dataset.letter).sort(()=>Math.random()-0.5);
  renderBank(tiles);
});
document.getElementById('checkBtn').addEventListener('click', checkAnswer);
document.getElementById('nextBtn').addEventListener('click', ()=> { idx++; nextWord(); });

/* --- localStorage –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ --- */
function saveProgress(){
  localStorage.setItem('russian_spelling_progress', JSON.stringify({pool, idx}));
}
function loadProgress(){
  const raw = localStorage.getItem('russian_spelling_progress');
  if (!raw) return false;
  try {
    const obj = JSON.parse(raw);
    if (obj && Array.isArray(obj.pool) && typeof obj.idx === 'number'){
      pool = obj.pool;
      idx = obj.idx;
      return true;
    }
  } catch(e){}
  return false;
}

/* --- init --- */
if (!loadProgress()) initPool();
pickNext();
updateProgress();
</script>
</body>
</html>
